#coding:utf-8
import sys
import os
def makeDir(newDir, fileType):
    typeToPath = {'c': 'c\\',
            'py': 'python\\',
            'cpp': 'cpp\\'}
    baseDir = 'F:\\code\\'
    fullDir = baseDir + typeToPath[fileType] + newDir
    cmd = 'mkdir ' + fullDir
    os.system(cmd)
    return fullDir

def newFile(fileName, path):
    cmd = 'gvim ' + path + '\\' + fileName
    os.system(cmd)

def main(argv):
    print argv
    if len(argv) in [2, 3]:
        if len(argv) == 3:
            newDir = argv[2]
        else:
            newDir = argv[1].split('.')[0]
        try:
            fileType = argv[1].split('.')[1]
            fileName = argv[1]
        except:
            fileType = 'py'
            fileName = argv[1] + '.py'
        path = makeDir(newDir, fileType)
        newFile(fileName, path)
    else:
        print 'args error'
        print 'usage: new filename projectPath'
    exit()

if __name__ == '__main__':
    main(sys.argv)
